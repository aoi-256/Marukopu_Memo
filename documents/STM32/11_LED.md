# LEDをつけてみよう

プログラム作成の第一歩として、LEDをつけるコードを作成してみよう！

## 作業の概要

(0) 初期設定をがんばる

(1) wrapper.cppにLEDをつけたり消したりするコードを書く

(2) 実際に配線をしてLEDが付くか試してみる

## ピンの設定

初期設定のままでPA5に内蔵LEDが割り当てられている

このPA5に電気を送ってあげればLEDがつく

## プログラム

LEDをつけるためには、使うSTM32のピンと電圧をプログラムに書き込む必要がある

ここでは、この関数を使う

```
HAL_GPIO_WritePin(GPIOA,GPIO_PIN_5, GPIO_PIN_SET);
```

・1つ目の引数（関数に渡す値のこと）のGPIOAは、ピンの種類によって変えなければならない

PAのピンならGPIOA、PBのピンならGPIOBのように設定する

・2つ目の引数のGPIO_PIN_5がPA5のピンを示している

他のピンを使いたい場合は、この数字をそのピンに合わせてあげればよい

・3つ目の引数は、電圧を表している。ここでは、GPIO_PIN_SETが3.3VでGPIO_PIN_RESETが0Vを示しているので

LEDをつけたいときはSETに、LEDを消したいときはRESETにしてあげればよい

・またLEDのon/offが早すぎると見てもわからないので、一定時間待機する関数も使う

```
HAL_Delay(500);
```
この関数の()に入れた数字(ミリ秒/ 0.001s)分だけプログラムが待機してくれる

ここでは、500ms(ミリ秒)としているため、0.5s待機してくれる

・ここまで紹介した関数を使って、プログラムを作成する

#### void init()はプログラム実行時に一度だけ実行される部分になる

#### 初期設定を書いておく時に便利

#### void loop()は void init()が終わった後に、繰り返し実行される部分である

ここでは、実行時にまずLEDをつけて１秒待機させた後に

0.5秒ごとにLEDが付いたり消えたりするようにしている

ピンを変えるのは大変なので、順番や待機時間を変えて色々試してみよう！

```
void init(){

  HAL_GPIO_WritePin(GPIOA,GPIO_PIN_5, GPIO_PIN_SET);
  HAL_Delay(1000);

}

void loop(){

	HAL_GPIO_WritePin(GPIOA,GPIO_PIN_5, GPIO_PIN_RESET);

	HAL_Delay(500);

  HAL_GPIO_WritePin(GPIOA,GPIO_PIN_5, GPIO_PIN_SET);

  HAL_Delay(500);

}

## おわりに

今回は、基本のLEDをつけるプログラムを作成した！

今後のプログラム作成中にも、途中でLEDをつけることでエラーが出てないかのチェックをすることができるので

困ったらLEDをつけてみるといいかもしれない！

[次のページ］(12_シリアル通信.md)

